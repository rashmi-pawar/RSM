{"version":3,"sources":["webpack:///./src/app/subscription/subscription.module.ts","webpack:///./src/app/subscription/subscription.page.html","webpack:///./src/app/subscription/subscription.page.scss","webpack:///./src/app/subscription/subscription.page.ts"],"names":[],"mappings":"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","file":"subscription-subscription-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SubscriptionPage } from './subscription.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubscriptionPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [SubscriptionPage]\n})\nexport class SubscriptionPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Subscription List</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <div *ngIf=\\\"list?.length\\\">\\n      <ion-item *ngFor=\\\"let listdata of list;let i = index\\\" lines=\\\"none\\\" no-padding>\\n        <ion-label>{{listdata?.title}}<br>\\n          <p>{{listdata?.details}}</p>\\n        </ion-label>\\n\\n        <ion-checkbox slot=\\\"end\\\" [checked]=\\\"checkedlist.indexOf(listdata.id) >= 0\\\" (click)=\\\"checked(listdata.id,i)\\\">\\n        </ion-checkbox>\\n      </ion-item>\\n    </div>\\n    <div *ngIf=\\\"!list?.length && isshow\\\" class=\\\"nodata\\\"> No data found!</div>\\n  </ion-list>\\n  <ion-button color=\\\"primary\\\" expand=\\\"full\\\" (click)=\\\"subscribe()\\\" *ngIf=\\\"subscribeId.length>0\\\" mode=\\\"ios\\\">SAVE\\n  </ion-button>\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3N1YnNjcmlwdGlvbi9zdWJzY3JpcHRpb24ucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ApiService } from '../api.service';\nimport { ToastController, Events, LoadingController } from '@ionic/angular';\nimport { NotificationService } from '../service/notification.service';\nimport { PageTrack } from '../decorators/page-track.decorator';\nimport { SettingService } from '../service/setting.service';\n\n@Component({\n  selector: 'app-subscription',\n  templateUrl: './subscription.page.html',\n  styleUrls: ['./subscription.page.scss']\n})\n@PageTrack('Subscription Screen')\nexport class SubscriptionPage implements OnInit {\n  list: any = [];\n  subscribeId: any = [];\n  checkedlist: any = [];\n  isshow: any;\n  constructor(\n    public toastCtrl: ToastController,\n    private apiService: ApiService,\n    public events: Events,\n    public loadingController: LoadingController,\n    public settingService: SettingService,\n    private pushNotificationService: NotificationService\n  ) {\n    events.subscribe('sub:created', time => {\n      this.subscribeId = [];\n      this.checkedlist = [];\n      this.subscriptionList();\n      this.usersubscriptionlist();\n    });\n  }\n\n  ngOnInit() {\n    this.subscriptionList();\n    this.usersubscriptionlist();\n    this.isshow = false;\n  }\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      message: 'loading',\n      duration: 2000\n    });\n    await loading.present();\n    await loading.onDidDismiss();\n  }\n  subscriptionList() {\n    this.presentLoading();\n    this.apiService.subscriptionlist(this.settingService.getToken()).subscribe(\n      res => {\n        if (res['status'] == true) {\n          this.list = res['data'];\n        } else {\n          this.list = [];\n        }\n      },\n      err => {\n        console.log(err.error.message);\n      }\n    );\n  }\n  usersubscriptionlist() {\n    this.apiService\n      .usersubscriptionlist(this.settingService.getToken())\n      .subscribe(\n        res => {\n          if (res['status'] == true) {\n            if (res['data'].length) {\n              for (var i = 0; i < res['data'].length; i++) {\n                this.checkedlist.push(res['data'][i].id);\n                this.subscribeId.push(res['data'][i].id);\n              }\n            }\n          } else {\n          }\n        },\n        err => {\n          console.log(err.error.message);\n        }\n      );\n  }\n  firebaseTopicSubscription() {\n    const unsubscribedTopicList = this.list.filter(x =>\n      this.checkedlist.includes(x.id)\n    );\n    unsubscribedTopicList.forEach(item => {\n      this.pushNotificationService.pushObject.unsubscribe(\n        item.title.replace(' ', '')\n      );\n    });\n    const subscribedTopicList = this.list.filter(x =>\n      this.subscribeId.includes(x.id)\n    );\n    subscribedTopicList.forEach(item => {\n      this.pushNotificationService.pushObject.subscribe(\n        item.title.replace(' ', '')\n      );\n    });\n  }\n  checked(value, index) {\n    var push = 0;\n    if (this.subscribeId.length > 0) {\n      for (var i = 0; i < this.subscribeId.length; i++) {\n        if (parseInt(this.subscribeId[i]) == parseInt(value)) {\n          this.subscribeId.splice(i, 1);\n          push = 1;\n        }\n      }\n      if (push == 0) {\n        this.subscribeId.push(value);\n      }\n    } else {\n      this.subscribeId.push(value);\n    }\n  }\n  async presentToast(msg) {\n    const toast = await this.toastCtrl.create({\n      message: msg,\n      duration: 2000,\n      mode: 'md',\n      cssClass: 'customToast'\n    });\n    toast.present();\n  }\n  subscribe() {\n    if (this.subscribeId.length > 0) {\n      var data = {\n        user_id: this.settingService.getUserId(),\n        subscription_id: this.subscribeId\n      };\n      this.apiService.subscribe(data, this.settingService.getToken()).subscribe(\n        res => {\n          if (res['status'] == true) {\n            this.firebaseTopicSubscription();\n            this.presentToast(res['message']);\n          } else {\n            this.isshow = true;\n          }\n        },\n        err => {\n          console.log(err.error.message);\n        }\n      );\n    } else {\n      this.presentToast('First add subscription list');\n    }\n  }\n}\n"],"sourceRoot":""}