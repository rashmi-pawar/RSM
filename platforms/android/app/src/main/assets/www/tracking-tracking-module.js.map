{"version":3,"sources":["webpack:///./node_modules/rxjs-compat/_esm5/add/operator/filter.js","webpack:///./node_modules/rxjs-compat/_esm5/operator/filter.js","webpack:///./src/app/tracking/tracking.module.ts","webpack:///./src/app/tracking/tracking.page.html","webpack:///./src/app/tracking/tracking.page.scss","webpack:///./src/app/tracking/tracking.page.ts"],"names":[],"mappings":"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","file":"tracking-tracking-module.js","sourcesContent":["import { Observable } from 'rxjs';\nimport { filter } from '../../operator/filter';\nObservable.prototype.filter = filter;\n//# sourceMappingURL=filter.js.map","import { filter as higherOrderFilter } from 'rxjs/operators';\nexport function filter(predicate, thisArg) {\n    return higherOrderFilter(predicate, thisArg)(this);\n}\n//# sourceMappingURL=filter.js.map","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TrackingPage } from './tracking.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TrackingPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [TrackingPage]\n})\nexport class TrackingPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Live Tracking </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-button color=\\\"success\\\" (click)=\\\"startLiveTracking()\\\" mode=\\\"ios\\\">\\n    <ion-icon name='pin' style=\\\"margin-right: 5px;\\\"></ion-icon> Start\\n  </ion-button>\\n  <ion-button color=\\\"danger\\\" (click)=\\\"stopLiveTracking()\\\" mode=\\\"ios\\\">\\n    <ion-icon name='pin' style=\\\"margin-right: 5px;\\\"></ion-icon>Stop\\n  </ion-button>\\n  <p *ngIf=\\\"distance !=''\\\"><b>Distance : </b> {{distance}}</p>\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RyYWNraW5nL3RyYWNraW5nLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from \"@angular/core\";\nimport { Geolocation, Geoposition } from \"@ionic-native/geolocation/ngx\";\nimport { Subscription } from \"rxjs/Subscription\";\nimport { ToastController } from \"@ionic/angular\";\nimport { PageTrack } from \"../decorators/page-track.decorator\";\n\nimport \"rxjs/add/operator/filter\";\ndeclare var google;\ndeclare var navigator: any;\n@Component({\n  selector: \"app-tracking\",\n  templateUrl: \"./tracking.page.html\",\n  styleUrls: [\"./tracking.page.scss\"]\n})\n@PageTrack(\"Tracking Screen\")\nexport class TrackingPage implements OnInit {\n  path: any = [];\n  distance: any = \"\";\n  positionSubscription: Subscription;\n  watch: any;\n  constructor(\n    public toastCtrl: ToastController,\n    private geolocation: Geolocation\n  ) {\n    this.path = [];\n  }\n\n  ngOnInit() { }\n  async presentToast(msg) {\n    const toast = await this.toastCtrl.create({\n      message: msg,\n      duration: 2000,\n      mode: 'md',\n      cssClass: 'customToast'\n    });\n    toast.present();\n  }\n  startLiveTracking() {\n    this.path = [];\n\n    this.geolocation\n      .getCurrentPosition()\n      .then(resp => {\n        this.presentToast(\"Start tracking\");\n        this.path.push({\n          lat: resp.coords.latitude,\n          lng: resp.coords.longitude\n        });\n      })\n      .catch(error => {\n        console.log(\"Error getting location\", error);\n      });\n\n    const options = {\n      frequency: 3000,\n      enableHighAccuracy: true\n    };\n\n    this.watch = this.geolocation\n      .watchPosition(options)\n      .subscribe((position: Geoposition) => {\n\n        this.path.push({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        });\n      });\n  }\n  stopLiveTracking() {\n\n    let total = 0;\n    for (let i = 0; i < this.path.length - 1; i++) {\n      const pos1 = new google.maps.LatLng(this.path[i].lat, this.path[i].lng);\n      const pos2 = new google.maps.LatLng(\n        this.path[i + 1].lat,\n        this.path[i + 1].lng\n      );\n      total += google.maps.geometry.spherical.computeDistanceBetween(\n        pos1,\n        pos2\n      );\n      this.distance = (total / 1609.34).toFixed(1) + \" mi\";\n    }\n    this.watch.unsubscribe();\n    navigator.geolocation.clearWatch(this.watch);\n    this.presentToast(\"Stop tracking\");\n  }\n}\n"],"sourceRoot":""}