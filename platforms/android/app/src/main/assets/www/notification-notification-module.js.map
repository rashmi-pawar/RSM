{"version":3,"sources":["webpack:///./src/app/notification/notification.module.ts","webpack:///./src/app/notification/notification.page.html","webpack:///./src/app/notification/notification.page.scss","webpack:///./src/app/notification/notification.page.ts"],"names":[],"mappings":"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","file":"notification-notification-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificationPage } from './notification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [NotificationPage]\n})\nexport class NotificationPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"{{back}}\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"light\\\">\\n      Notification\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\" class=\\\"more-btn\\\" (click)=\\\"presentPopover($event,data)\\\">\\n      <ion-icon name=\\\"md-more\\\"></ion-icon>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"receipt-add\\\" padding *ngIf=\\\"showpop\\\" (click)=\\\"hidee($event.target)\\\">\\n    <div class=\\\"pop-list-detail ion-padding-horizontal\\\" id=\\\"sh\\\">\\n      <ul>\\n        <li id=\\\"upload\\\" class=\\\"popup-li delete\\\" (click)=\\\"markAllAsRead()\\\">\\n          Mark all as read\\n        </li>\\n        <li id=\\\"upload\\\" class=\\\"popup-li delete\\\" (click)=\\\"clearAll()\\\">\\n          Clear all\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n  <ion-card *ngFor=\\\"let notification of notificationList\\\"  [style.background-color]=\\\"notification.is_message_viewed == 0 ? '#80808036' : null\\\">\\n    <img src=\\\"{{notification.image}}\\\" />\\n    <ion-card-header style=\\\"padding: 0 20px;\\\">\\n      <h4 style=\\\"margin: 10px 0 0;\\\">{{notification.title}}</h4>\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n      {{notification.message}}\\n      <p class=\\\"notification-date\\\">{{formatDate(notification.schedule_date)}}</p>\\n    </ion-card-content>\\n  </ion-card>\\n  <div class=\\\"no-events\\\" *ngIf=\\\"isProcessComplete && notificationList.length === 0\\\">\\n    <p> No Notifications </p>\\n  </div>\\n  <ion-infinite-scroll threshold=\\\"50px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content\\n            loadingSpinner=\\\"bubbles\\\"\\n            loadingText=\\\"Loading more data...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\\n\"","module.exports = \".no-events {\\n  padding: 30px;\\n}\\n\\n.receipt-add {\\n  position: fixed;\\n  width: 100%;\\n  z-index: 99;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.5);\\n  padding-top: 5px;\\n  padding-right: 5px;\\n}\\n\\n.pop-list-detail {\\n  width: 170px;\\n  background-color: white;\\n  right: 0;\\n  float: right;\\n  border-radius: 5px;\\n}\\n\\n.pop-list-detail ul {\\n  padding-left: 0px;\\n}\\n\\n.pop-list-detail ul li {\\n  list-style: none;\\n  line-height: 25px;\\n  color: #62666B;\\n  font-size: 18px;\\n  padding: 5px 0px;\\n}\\n\\n.notification-date {\\n  text-align: right;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy8yMDIydTEzL0Rlc2t0b3AvdW50aXRsZWQgZm9sZGVyIDQvQXJjaGl2ZS9zcmMvYXBwL25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24ucGFnZS5zY3NzIiwic3JjL2FwcC9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7QUNDRjs7QURDQTtFQUNFLGVBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSw4QkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7QUNFRjs7QURFQTtFQUVFLFlBQUE7RUFDQSx1QkFBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUNBRjs7QURJQTtFQUNFLGlCQUFBO0FDREY7O0FER0E7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtBQ0FGOztBREVBO0VBQ0UsaUJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5vLWV2ZW50c3tcbiAgcGFkZGluZzogMzBweDtcbn1cbi5yZWNlaXB0LWFkZCB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgd2lkdGg6IDEwMCU7XG4gIHotaW5kZXg6IDk5O1xuICBoZWlnaHQ6IDEwMCU7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjUpO1xuICBwYWRkaW5nLXRvcDogNXB4O1xuICBwYWRkaW5nLXJpZ2h0OiA1cHg7XG59XG5cblxuLnBvcC1saXN0LWRldGFpbFxue1xuICB3aWR0aDogMTcwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICByaWdodDogMDtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIFxufVxuXG4ucG9wLWxpc3QtZGV0YWlsIHVsIHtcbiAgcGFkZGluZy1sZWZ0OiAwcHg7XG59XG4ucG9wLWxpc3QtZGV0YWlsIHVsIGxpIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgbGluZS1oZWlnaHQ6IDI1cHg7XG4gIGNvbG9yOiAjNjI2NjZCO1xuICBmb250LXNpemU6IDE4cHg7XG4gIHBhZGRpbmc6IDVweCAwcHg7XG59XG4ubm90aWZpY2F0aW9uLWRhdGV7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xufSIsIi5uby1ldmVudHMge1xuICBwYWRkaW5nOiAzMHB4O1xufVxuXG4ucmVjZWlwdC1hZGQge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHdpZHRoOiAxMDAlO1xuICB6LWluZGV4OiA5OTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gIHBhZGRpbmctdG9wOiA1cHg7XG4gIHBhZGRpbmctcmlnaHQ6IDVweDtcbn1cblxuLnBvcC1saXN0LWRldGFpbCB7XG4gIHdpZHRoOiAxNzBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gIHJpZ2h0OiAwO1xuICBmbG9hdDogcmlnaHQ7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuLnBvcC1saXN0LWRldGFpbCB1bCB7XG4gIHBhZGRpbmctbGVmdDogMHB4O1xufVxuXG4ucG9wLWxpc3QtZGV0YWlsIHVsIGxpIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgbGluZS1oZWlnaHQ6IDI1cHg7XG4gIGNvbG9yOiAjNjI2NjZCO1xuICBmb250LXNpemU6IDE4cHg7XG4gIHBhZGRpbmc6IDVweCAwcHg7XG59XG5cbi5ub3RpZmljYXRpb24tZGF0ZSB7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xufSJdfQ== */\"","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {BackStackService} from '../service/back-stack.service';\nimport {IonInfiniteScroll, LoadingController} from '@ionic/angular';\nimport {ApiService} from '../api.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-notification',\n  templateUrl: './notification.page.html',\n  styleUrls: ['./notification.page.scss'],\n})\nexport class NotificationPage implements OnInit {\n  back;\n  notificationList: any = [];\n  page = 1;\n  isLoading = true;\n  isProcessComplete = false;\n  showpop = false;\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n  constructor(private backStack: BackStackService, private apiService: ApiService, public loadingController: LoadingController,) {\n    this.back = this.backStack.getBackStack('notification');\n  }\n\n  ngOnInit() {\n    this.loadData(null);\n  }\n\n  async presentPopover(ev: any, data: any) {\n    this.showpop = true;\n  }\n  hidee() {\n    this.showpop = false;\n  }\n\n  formatDate(date) {\n    return moment(date).format('DD MMM, yyyy');\n  }\n  \n  markAllAsRead(){\n    this.hidee();\n    this.presentLoading();\n      this.apiService.markAllAsReadNotification().subscribe(res => {\n        this.isProcessComplete = true;\n        if (res.status === true) {\n          this.notificationList = [];\n          this.page = 1;\n          this.loadData(null);\n        } else {\n          this.dismissLoading();\n        }\n      })\n  }\n\n  clearAll(){\n    this.hidee();\n    this.presentLoading();\n    this.apiService.clearAllNotification().subscribe(res => {\n      this.isProcessComplete = true;\n      if (res.status === true) {\n        this.notificationList = [];\n        this.page = 1;\n        this.loadData(null);\n      } else {\n        this.dismissLoading();\n      }\n    })\n  }\n  \n  async presentLoading() {\n    this.isLoading = true;\n    const loading = await this.loadingController.create({\n      message: 'loading',\n      duration: 3000\n    });\n    loading.present();\n    loading.onDidDismiss();\n  }\n  async dismissLoading() {\n    console.log('dismissed call')\n    this.isLoading = false;\n    return await this.loadingController\n        .dismiss()\n        .then(() => console.log('dismissed'));\n  }\n  loadData(event) {\n    this.presentLoading();\n    setTimeout(() => {\n      this.apiService.getNotificationList({ page: this.page, limit: 10 }).subscribe(res => {\n        this.isProcessComplete = true;\n        this.dismissLoading();\n        if (res.status === true) {\n          this.page += 1;\n          this.notificationList.push(...res.data);\n          if (event && res.data.length < 10) {\n            event.target.disabled = true;\n          }\n          if (event) {\n            event.target.complete();\n          }\n        }\n      }, error => {\n        this.isProcessComplete = true;\n      });\n    }, 500);\n  }\n}\n"],"sourceRoot":""}